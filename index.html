<html>
<head>
<script type="text/javascript" src="https://cdn.firebase.com/v0/firebase.js"></script>
<script type="text/javascript" src="https://cdn.firebase.com/v0/firebase-auth-client.js"></script>  
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/knockout/knockout-2.2.1.js"></script>  
<script type="text/javascript" src="http://hiroshi.github.io/knockoutFire/knockoutfire-0.0.4.js"></script>
<script type="text/javascript" src="js/moment.min.js"></script>
<link rel="stylesheet" type="text/css" href="css/style.css">

</head>  
<body>
<h1>Konami - Easter Egging at it's best</h1>
<section id="konami">

<!-- ko with: konami.newItem -->     
  <form data-bind="submit: create">
    <label>Name</label>
    <input id="title" type="text" name="title" placeholder="7/2/13" data-bind="value: title, valueUpdate: 'keyup'">
    <label>Website Url</label>
    <input type="text" name="website" placeholder="http://www.vogue.com" data-bind="value: website, valueUpdate: 'keyup'">
    <label>Description</label>
    <input type="text" name="desc"placeholder="Vogue Site features a raptor easter egg that pops up random raptors with hats"  data-bind="value: desc, valueUpdate: 'keyup'">
    <span class="form-actions">
      <button type="submit">Submit</button>
      <button type="submit">Reset</button>
    </span>
  </form>
<!-- /ko -->

  <ul data-bind="foreach: konami">
    <li>
        <label>Name</label>
        <input type="text" name="title" placeholder="Vogue.com raptor attack" data-bind="value: title, valueUpdate: 'keyup'" disabled>
    </li>
    <li>
        <label>Website Url</label>
        <input type="text" name="website"data-bind="value: website, valueUpdate: 'keyup'" disabled>
    </li>
    <li>
        <label>Description</label>
        <input type="text" data-bind="value: desc, valueUpdate: 'keyup'" disabled>
        <a data-bind="click: $parent.removeItem" href="#">[x]</a>        
   <hr/>

    </li>
  </ul>

</section>
<script>
var now = moment().format();
var url = "https://konami-codes.firebaseio.com/"
var firebase = new Firebase(url);
var viewModel = {
    "konami": KnockoutFire.observable(
        firebase, {
            "$konami": {
                "title": true,
                "website": true,
                "desc": true

            },
            ".newItem": {
                ".priority": function() { return Date.now() }
            }
        }
    ),
    "removeItem": function(item) {
        firebase.child(item.firebase.name()).remove();
    }
};
ko.applyBindings(viewModel, document.getElementById("konami"));

</script>
</body>
</html>